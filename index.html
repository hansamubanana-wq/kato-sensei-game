<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ è—¤å…ˆç”Ÿ è‚²æˆã‚²ãƒ¼ãƒ DX</title>
    <style>
        body { font-family: "Helvetica Neue", Arial, sans-serif; text-align: center; background-color: #ffd1dc; padding: 20px; }
        .game-container { background: white; max-width: 400px; margin: 0 auto; padding: 20px; border-radius: 20px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); border: 5px solid #ff9eb5; }
        h1 { color: #d63384; font-size: 24px; }
        #character-area { position: relative; height: 150px; display: flex; align-items: center; justify-content: center; }
        #character { font-size: 80px; transition: transform 0.2s; }
        .poop { position: absolute; font-size: 30px; bottom: 10px; right: 20px; animation: bounce 1s infinite; }
        
        .status-box { text-align: left; margin: 20px 0; padding: 15px; background: #fff0f5; border-radius: 10px; font-weight: bold; }
        .buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .buttons button { padding: 12px; font-size: 14px; cursor: pointer; background: #ff9eb5; border: none; border-radius: 8px; color: white; font-weight: bold; }
        .buttons button:active { transform: scale(0.95); }
        .clean-btn { grid-column: span 2; background: #88ccff !important; }
        
        #message { height: 50px; color: #333; margin-top: 10px; font-size: 14px; }
        .hidden { display: none; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

<div class="game-container">
    <h1>åŠ è—¤å…ˆç”Ÿ è‚²æˆã‚²ãƒ¼ãƒ  DX</h1>
    <p>å‹¤ç¶š: <span id="age">1</span>æ—¥ç›® <span id="rank-name">ï¼ˆæ–°ä»»ï¼‰</span></p>
    
    <div id="character-area">
        <div id="character">ğŸ‘¨â€ğŸ«</div>
        <div id="poops"></div> </div>
    
    <div class="status-box">
        <p>â˜• ã‚«ãƒ•ã‚§ã‚¤ãƒ³: <span id="caffeine">50</span>/100</p>
        <p>ğŸ”¥ ã‚„ã‚‹æ°—: <span id="motivation">50</span>/100</p>
        <p>â¤ï¸ ä½“åŠ›: <span id="energy">50</span>/100</p>
    </div>

    <div id="message">ãƒ†ã‚¹ãƒˆæœŸé–“ãŒå§‹ã¾ã£ãŸ...</div>

    <div class="buttons" id="action-buttons">
        <button onclick="giveCoffee()">â˜• ã‚³ãƒ¼ãƒ’ãƒ¼</button>
        <button onclick="askQuestion()">ğŸ™‹ è³ªå•ã™ã‚‹</button>
        <button onclick="sleep()">ğŸ’¤ ä¼‘ã¾ã›ã‚‹</button>
        <button onclick="playGame()">ğŸ® ã‚²ãƒ¼ãƒ ã®è©±</button>
        <button onclick="clean()" class="clean-btn">ğŸ§¹ æ¡ç‚¹ã‚’æ‰‹ä¼ã† (0)</button>
    </div>

    <button id="reset-btn" class="hidden" style="width:100%; padding:15px; margin-top:20px;" onclick="location.reload()">å†é›‡ç”¨ï¼ˆãƒªã‚»ãƒƒãƒˆï¼‰</button>
</div>

<script>
    let caffeine = 50;
    let motivation = 50;
    let energy = 50;
    let age = 1;
    let poopCount = 0; // æœªæ¡ç‚¹ã®æ•°
    let isAlive = true;
    let rank = "æ–°ä»»";

    function updateStatus() {
        if (!isAlive) return;

        // ç”»é¢æ›´æ–°
        document.getElementById('caffeine').innerText = Math.floor(caffeine);
        document.getElementById('motivation').innerText = Math.floor(motivation);
        document.getElementById('energy').innerText = Math.floor(energy);
        document.getElementById('age').innerText = age;
        
        // é€²åŒ–åˆ¤å®š
        if (age >= 10 && motivation > 80) { rank = "æ ¡é•·"; document.getElementById('character').innerText = "ğŸ¤´"; }
        else if (age >= 5 && motivation > 60) { rank = "å­¦å¹´ä¸»ä»»"; document.getElementById('character').innerText = "ğŸ¤µ"; }
        else { rank = "æ–°ä»»"; document.getElementById('character').innerText = "ğŸ‘¨â€ğŸ«"; }
        document.getElementById('rank-name').innerText = `ï¼ˆ${rank}ï¼‰`;

        // æ¡ç‚¹ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºæ›´æ–°
        document.querySelector('.clean-btn').innerText = `ğŸ§¹ æ¡ç‚¹ã‚’æ‰‹ä¼ã† (${poopCount})`;

        // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼åˆ¤å®š
        if (energy <= 0 || caffeine <= 0 || poopCount >= 4) {
            gameOver();
        }
    }

    function giveCoffee() { action(20, 5, 0, "ã€Œã†ã‚€ã€ç›®ãŒè¦šã‚ãŸã€‚ã€"); }
    function askQuestion() { action(-5, 10, -10, "ã€Œã„ã„è³ªå•ã ï¼ã€"); }
    function sleep() { action(-10, 0, 30, "ã€Œã‚¹ãƒ”ãƒ¼...ã€"); }
    function playGame() { action(-5, 15, -5, "ã€ŒAstro Botã‹...æ‚ªããªã„ãªã€‚ã€"); }

    function action(caf, mot, ene, msg) {
        if (!isAlive) return;
        caffeine += caf; motivation += mot; energy += ene;
        limitCheck();
        document.getElementById('message').innerText = msg;
        updateStatus();
    }

    // æƒé™¤ï¼ˆæ¡ç‚¹ï¼‰ã‚³ãƒãƒ³ãƒ‰
    function clean() {
        if (!isAlive || poopCount === 0) return;
        poopCount = 0;
        document.getElementById('poops').innerHTML = "";
        document.getElementById('message').innerText = "æ¡ç‚¹ãŒçµ‚ã‚ã£ã¦ã‚¹ãƒƒã‚­ãƒªï¼";
        motivation += 5;
        updateStatus();
    }

    function limitCheck() {
        caffeine = Math.max(0, Math.min(100, caffeine));
        motivation = Math.max(0, Math.min(100, motivation));
        energy = Math.max(0, Math.min(100, energy));
    }

    function gameOver() {
        isAlive = false;
        let cause = "";
        if (poopCount >= 4) cause = "æœªæ¡ç‚¹ã®å±±ã«åŸ‹ã‚‚ã‚Œã¦";
        else if (caffeine <= 0) cause = "ã‚«ãƒ•ã‚§ã‚¤ãƒ³åˆ‡ã‚Œã§";
        else cause = "éåŠ´ã§";
        
        document.getElementById('message').innerText = `ğŸ˜± åŠ è—¤å…ˆç”Ÿã¯${cause}å€’ã‚Œã¾ã—ãŸ...`;
        document.getElementById('character').innerText = "ğŸ‘»";
        document.getElementById('action-buttons').classList.add('hidden');
        document.getElementById('reset-btn').classList.remove('hidden');
    }

    // æ™‚é–“çµŒéãƒ«ãƒ¼ãƒ—ï¼ˆ1ç§’ã”ã¨ï¼‰
    setInterval(() => {
        if (isAlive) {
            caffeine -= 1; energy -= 1;
            
            // ç¢ºç‡ã§æœªæ¡ç‚¹ï¼ˆã†ã‚“ã¡ï¼‰ç™ºç”Ÿ
            if (Math.random() < 0.1) { 
                poopCount++;
                let p = document.createElement("div");
                p.className = "poop";
                p.innerText = "ğŸ“„"; // ãƒ†ã‚¹ãƒˆç”¨ç´™
                p.style.right = (Math.random() * 80) + "px"; // ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®
                document.getElementById('poops').appendChild(p);
                document.getElementById('message').innerText = "æœªæ¡ç‚¹ã®ãƒ†ã‚¹ãƒˆãŒç™ºç”Ÿï¼";
            }

            // 30ç§’ã”ã¨ã«1æ—¥çµŒéï¼ˆå¹´é½¢ï¼‰
            if (new Date().getSeconds() % 30 === 0) { age++; }

            limitCheck();
            updateStatus();
        }
    }, 1000);

    updateStatus();
</script>
</body>
</html>